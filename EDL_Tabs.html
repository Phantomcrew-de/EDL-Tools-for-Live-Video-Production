
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>EDL-Tools Roundtrip Suite</title>
  <style>
    body { background: #181818; color: #eee; margin: 0; font-family: sans-serif; }
    .tab-container { display: flex; background: #222; }
    .tab { cursor: pointer; padding: 12px 22px; color: #aaa; }
    .tab.active { background: #444; color: #fff; }
    .tab-content { display: none; height: calc(100vh - 48px);}
    .tab-content.active { display: block; }
    iframe { width: 100%; height: 100%; border: none; background: #222; }
  </style>
</head>
<body>
  <div class="tab-container">
    <div class="tab active" data-target="offset">Offset-Editor</div>
    <div class="tab" data-target="atem">ATEM Tool</div>
    <div class="tab" data-target="resolve">Resolve Player</div>
	<div class="tab" data-target="help">Read Me</div>
  </div>
  <div class="tab-content active" id="tab-offset">
    <iframe id="iframe-offset" src="EDL_Offset_Editor_1_1_EN.html"></iframe>
  </div>
  <div class="tab-content" id="tab-atem">
    <iframe id="iframe-atem" src="EDL_for_ATEM_live_production_1_1_DE.html"></iframe>
  </div>
  <div class="tab-content" id="tab-resolve">
    <iframe id="iframe-resolve" src="EDL_video_player_for_resolve_1_1_DE.html"></iframe>
  </div>
    <div class="tab-content" id="tab-help">
    <iframe id="iframe-help" src="https://phantomcrew-de.github.io/EDL-Tools-for-Live-Video-Production/"></iframe>
  </div>
  <script>
    window.globalEDLText = "";
    let currentTab = "offset";
    function exportEDLFromTab(tabId) {
      document.getElementById('iframe-' + tabId).contentWindow.postMessage({type: 'EXPORT_EDL'}, '*');
    }
    function importEDLToTab(tabId) {
      if (window.globalEDLText && window.globalEDLText.length > 0)
        document.getElementById('iframe-' + tabId).contentWindow.postMessage({type: 'IMPORT_EDL', edl: window.globalEDLText}, '*');
    }
    document.querySelectorAll('.tab').forEach(tab => {
      tab.addEventListener('click', () => {
        const nextTab = tab.dataset.target;
        if (nextTab === currentTab) return;
        exportEDLFromTab(currentTab);
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        tab.classList.add('active');
        document.getElementById('tab-' + nextTab).classList.add('active');
        setTimeout(() => importEDLToTab(nextTab), 200);
        currentTab = nextTab;
      });
    });
    window.addEventListener('message', (event) => {
      if (event.data.type === 'EXPORT_RESULT' && typeof event.data.edl === 'string') {
        window.globalEDLText = event.data.edl;
      }
    });
  </script>
</body>
</html>
